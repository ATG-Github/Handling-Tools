<!DOCTYPE html>
<html>

<head>

    <script src="https://code.jquery.com/jquery-3.4.1.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.8.0/Chart.bundle.js"></script>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">




    <script src="notify.js"></script>
    <title>Handling</title>
</head>


<body>
    <div>
        <small class="float-right px-1  text-muted">0.2.5 - Working on descriptions and intuitivity</small><br>
        <div class="text-center">

            <span class="display-4">Handling Editor</span><br>
            <span class="mt-2">Edit handling files easily, and quickly.</span>

        </div>
    </div>

    <div class="container px-5" style="max-width:1500px">
        <div class="py-5 w-50 mx-auto">
            
            <p>This tool aims to help beginners visualise and understand handling files,
                by establishing itself as an intuitive interface between the user and the file.
            </p>
            <p>
                You can start from scratch, and move sliders around right away. Just press the Save button at the bottom
                to download the an edited file. Do remember to open it and edit the handling id.
            </p>
            <p class="text-center mt-5">
                Also, you can load a custom handling file below.
            </p>
            <div class="d-flex justify-content-around">

                <div class="">
                    <div class="custom-file">
                        <input type="file" class="custom-file-input " id="handlingFileLoader">
                        <label class="custom-file-label" for="handlingFileLoader">Select a handling.meta file...</label>
                    </div>
                </div>

            </div>

            <div class="text-center mt-2">
                <a name="" onfocus="UpdateFileObject()" id="savefile" class="btn btn-primary btn " href="#"
                    role="button">Save Current File</a>
            </div>
            <div class="d-flex align-content-center mt-2">
            </div>
        </div>
    </div>

    <!-- Alert in case the user does not load a handling file but tries to edit the values -->
    <div class="alert alert-warning alert w-25 mx-auto text-center d-none" role="alert" id="wEmptyFile">Load a handling
        file first.</div>

    <div class="container-fluid border py-2 px-5 mb-5" style="max-width:1500px">
        <!-- Tab links -->
        <ul class="nav nav-tabs">
            <li class="nav-item">
                <a class="nav-link active show" data-toggle="tab" id="chassis-tab" href="#chassis">Chassis</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" data-toggle="tab" id="engine-tab" href="#engine">Engine</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" data-toggle="tab" id="transmission-tab" href="#transmission">Transmission</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" data-toggle="tab" id="brakes-tab" href="#brakes">Brakes</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" data-toggle="tab" id="traction-tab" href="#traction">Traction</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" data-toggle="tab" id="suspension-tab" href="#suspension">Suspension</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" data-toggle="tab" id="antiroll-tab" href="#antiroll">Antiroll</a>
            </li>
            <li class="nav-item">
                <a class="nav-link disabled" href="#">Flags</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" data-toggle="tab" id="raw-tab" href="#raw">Raw data</a>
            </li>
        </ul>
        <!-- Tabs Holder -->
        <div class="container-fluid tab-content " id="myTabContent">
            <!-- Tab items -->
            <div class="pb-5  tab-pane fade   active show" id="chassis" role="tabpanel" aria-labelledby="chassis-tab">
                <div class="row pb-4 px-3">

                    <div class="border mt-3">
                        <h3 class="text-center py-1">Chassis</h3>
                        <p class="px-5 text-center">This set of values represent the vehicle body itself, and will play a big role on how the vehicle behaves overall.</p>
                        <hr>
                        <div class="row px-3">
                            <div class="col-md-4">
                                <div class="bg-light border border-rounded p-4">
                                    <h3 class="text-center">Mass </h3>
                                    <p class="text-muted text-center">fMass</p>
                                    <div class="d-flex align-content-center">
                                        <span>0</span>
                                        <input type="range" min="0" max="15000" value="1000"
                                            class="form-control-range w-100 mx-2 custom-range" id="fMassSlider"
                                            oninput="applyValueChange(this)" name="fMass">
                                        <span>15000</span>
                                    </div>
                                    <div class="mb-4">
                                        <div class="text-center" style="min-height:50px">
                                            <input type="number" oninput="applyValueChange(this)" name="fMass"
                                                id="fMassInput" class="form-control text-center my-2">
                                            <small class="d-none">Your car will weight <span
                                                    class="text-danger">1000</span>kg.</small>
                                        </div>
                                    </div>
                                    <p>In GTA V, mass is only responsible for the interaction between entities, let's
                                        say
                                        its
                                        the
                                        vehicle's pushing force. Mass is not at all related to physical agility and does
                                        not
                                        affech
                                        the car's physics at all. Only affects how well the car fares when colliding
                                        with
                                        other
                                        entities. Vehicles, Lamp posts, rocks, etc.</p>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="bg-light border border-rounded p-4">

                                    <h3 class="text-center">Center of Mass</h3>
                                    <p class="text-muted text-center">vecCentreOfMassOffset</p>

                                    <div class="d-flex align-content-center">
                                        <span>-2</span>
                                        <input type="range" min="-2" max="2" value="0" step="0.01"
                                            class="form-control-range w-100 mx-2 custom-range" id="d_vecCentreOfMassOffsetSlider"
                                            oninput="applyValueChange(this)" name="vecCentreOfMassOffset" disabled>
                                        <span>2</span>
                                    </div>
                                    <input type="number" oninput="applyValueChange(this)" name="vecCentreOfMassOffset"
                                        class="form-control text-center my-2" step="0.001"
                                        id="d_vecCentreOfMassOffsetInput" disabled>
                                    <p>This editor is not able to edit the Center Of Mass offsets yet.</p>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="bg-light border border-rounded p-4">
                                    <h3 class="text-center">Rotational Inertia</h3>
                                    <p class="text-muted text-center">vecInertiaMultiplier</p>

                                    <div class="d-flex align-content-center">
                                        <span>-2</span>
                                        <input type="range" min="-2" max="2" value="0" step="0.01"
                                            class="form-control-range w-100 mx-2 custom-range" id="d_vecInertiaMultiplierSlider"
                                            oninput="applyValueChange(this)" name="vecInertiaMultiplier" disabled>
                                        <span>2</span>
                                    </div>
                                    <input type="number" oninput="applyValueChange(this)" name="vecInertiaMultiplier"
                                        class="form-control text-center my-2" step="0.001"
                                        id="d_vecInertiaMultiplierInput" disabled>
                                    <p>This editor is not able to edit the Rotational Inertia offsets yet.</p>
                                </div>
                            </div>
                        </div>
                        <div class="d-flex align-content-around px-3">
                            <div class="w-50 p-5">
                                <div class="bg-light border border-rounded p-4">
                                    <h3 class="text-center">Downforce</h3>
                                    <p class="text-muted text-center">fDownforceModifier</p>
                                    <canvas id="downforceChart" width="100" height="100"></canvas>
                                    <div class="d-flex align-content-center">
                                        <span>0</span>
                                        <input type="range" min="0" max="5" value="1" step="0.01"
                                            class="form-control-range w-100 mx-2 custom-range" id="fDownforceModifierSlider"
                                            oninput="applyValueChange(this)" name="fDownforceModifier">
                                        <span>5</span>
                                    </div>
                                    <input type="number" oninput="applyValueChange(this)" name="fDownforceModifier"
                                        class="form-control text-center my-2" step="0.001" id="fDownforceModifierInput">
                                    <div class="text-center">
                                        <small class="d-none">Your car's downforce is x<span id="downforceDisplay"
                                                class="text-danger">2.25</span>.</small>
                                    </div>
                                    <p>Downforce is a physical force applied down on your car. This force increases with
                                        speed.
                                    </p>
                                    <p>This increases grip at high speeds. The grip increase scales with this
                                        multiplier.
                                    </p>
                                    <div class="pl-5 font-italic">
                                        <li>Tip</li>
                                        <li>Another tip</li>
                                    </div>
                                </div>
                            </div>
                            <div class="w-50 p-5">
                                <div class="bg-light border border-rounded p-4">
                                    <h3 class="text-center">Air Resistance</h3>
                                    <p class="text-muted text-center">fInitialDragCoeff</p>
                                    <canvas id="airdragChart" width="100" height="100"></canvas>

                                    <div class="d-flex align-content-center">
                                        <span>0</span>
                                        <input type="range" min="1" max="20" value="7" step="0.01"
                                            id="fInitialDragCoeffSlider" oninput="applyValueChange(this)"
                                            class="form-control-range w-100 mx-2 custom-range" name="fInitialDragCoeff">
                                        <span>20</span>
                                    </div>
                                    <input type="number" oninput="applyValueChange(this)" name="fInitialDragCoeff"
                                        class="form-control text-center my-2" step="0.001" id="fInitialDragCoeffInput">
                                    <small class="d-none">Your car's air drag is x<span id="airdragDisplay"
                                            class="text-danger">2.25</span>.</small>
                                    <p>Air Resistance, also called Air Drag, represents the resistive force that the air applies on the vehicle. Higher resistance means an eariler perceived loss of power at higher speed, 
                                        resulting in a lower top speed, as the engine cannot overpower this force. Lower air resistance allows the vehicle to travel faster on the same power.
                                    </p>

                                    <p>Working as a multiplier, this value defines how much will air drag scale with
                                        speed. The higher the multiplier, the more powerful air resistance will be at
                                        high speeds.</p>
                                    <div class="pl-5 font-italic">
                                        <li>Tip</li>
                                        <li>Another tip</li>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="pb-5  tab-pane fade" id="engine" role="tabpanel" aria-labelledby="engine-tab">
                <div class="border mt-3">
                    <h3 class="text-center py-1">Engine</h3>
                    <p class="px-5 text-center">The moving force of your vehicle, this set of values govern details about how different bits of the engine will behave.
                        <br>Works in close relationswhip with Transmission.</p>

                    <hr>
                    <div class="row pb-4 px-3">
                        <div class="col-md-4">
                            <div class="bg-light border border-rounded p-4">
                                <h3 class="text-center">Power </h3>
                                <p class="text-muted text-center">fInitialDriveForce</p>

                                <div class="d-flex align-content-center">
                                    <span>0</span>
                                    <input class="w-100 mx-2 custom-range" name="fInitialDriveForce" type="range" value="0.3"
                                        step="0.005" min="0" max="5" oninput="applyValueChange(this)"
                                        id="fInitialDriveForceSlider">
                                    <span>5</span>
                                </div>
                                <input class="form-control text-center my-2" type="number" value="0.3" step="0.001"
                                    oninput="applyValueChange(this) " id="fInitialDriveForceInput"
                                    name="fInitialDriveForce">

                                <p>Engine power affects how strongly the engine will be able to rotate the wheels.
                                    Gearing uses this value as reference and scales it up and down as needed.</p>
                                <hr>
                                    <p>
                                        Higher engine power will cause the vehicle to lose grip more easily and wheelspin more, unless you compensate by increasing grip/downforce. A value too low may make the vehicle struggle over steep inclines.    
                                    </p>

                            </div>
                        </div>

                        <div class="col-md-4">
                            <div class="bg-light border border-rounded p-4">
                                <h3 class="text-center">Drive inertia</h3>
                                <p class="text-muted text-center">fDriveInertia</p>


                                <div class="d-flex align-content-center">
                                    <span>0</span>
                                    <input class="w-100 mx-2 custom-range" type="range" value="1" step="0.001" min="0" max="3"
                                        oninput="applyValueChange(this)" id="fDriveInertiaSlider" name="fDriveInertia">
                                    <span>3</span>
                                </div>
                                <input class="form-control text-center my-2" type="number"
                                    oninput="applyValueChange(this)" step="0.001" id="fDriveInertiaInput"
                                    name="fDriveInertia">
                                    <p>How responsive the engine revs will be to throttle control. Higher values will result in faster RPM acceleration and deceleration, while lower values will result in more sluggish RPMs. </p>
                                    <hr>
                                <p>
                                    Works similar to how a flywheel acts in real-life vehicles, storing drive momentum from the engine. A lighter flywheel can react faster to engine RPM changes with it's lack of weight, while heavier flywheels have higher momentum force which takes more engine power to influence.
                                </p>
                            </div>

                        </div>

                        <div class="col-md-4">
                            <div class="bg-light border border-rounded p-4">

                                <h3 class="text-center">Top Speed</h3>
                                <p class="text-muted text-center">fInitialDriveMaxFlatVel</p>

                                <div class="d-flex align-content-center">
                                    <span>0</span>
                                    <input class="w-100 mx-2 custom-range" type="range" value="100" step="1" min="0" max="200"
                                        oninput="applyValueChange(this)" id="fInitialDriveMaxFlatVelSlider"
                                        name="fInitialDriveMaxFlatVel">
                                    <span>200</span>
                                </div>
                                <input class="form-control text-center my-2" step="0.01" type="number"
                                    oninput="applyValueChange(this)" id="fInitialDriveMaxFlatVelInput"
                                    name="fInitialDriveMaxFlatVel">
                                    <p class="text-center">(MPH - m/s - KM/s)</p>
                                <p>Maximum engine top speed. Over this speed, the engine power will degrade greatly.</p>
                                <p>Keep in mind that gearing will stretch over this 'length'.</p>
                            </div>

                        </div>
                    </div>
                </div>
            </div>
            <div class="pb-5 tab-pane fade" id="transmission" role="tabpanel" aria-labelledby="transmission-tab">
                <div class="border mt-3">
                    <h3 class="text-center py-1">Transmission</h3>
                    <p class="px-5 text-center">Together with the Engine, the transmission settings define the power output of your vehicle.</p>
                    <hr>
                    <div class="row pb-4 px-3">
                        <div class="col-md-4">
                            <div class="bg-light border border-rounded p-4">

                                <h3 class="text-center">Nº of Gears</h3>
                                <p class="text-muted text-center">nInitialDriveGears</p>
                                <div class="d-flex align-content-center">
                                    <span>0</span>
                                    <input class="w-100 mx-2 custom-range" type="range" value="6" step="1" min="0" max="7"
                                        oninput="applyValueChange(this)" id="nInitialDriveGearsSlider"
                                        name="nInitialDriveGears">
                                    <span>7</span>
                                </div>
                                <input class="form-control text-center my-2" type="number" value="6" step="1"
                                    oninput="applyValueChange(this) " id="nInitialDriveGearsInput"
                                    name="nInitialDriveGears">
                                <p>Number of gears at stock. Remember Transmission upgrades add one gear total.</p>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="bg-light border border-rounded p-4">
                                <h3 class="text-center">Shift times</h3>
                                <p class="text-muted text-center">fClutchChangeRateScaleUpShift</p>
                                <div class="d-flex align-content-center">
                                    <span>0</span>
                                    <input class="w-100 mx-2 custom-range" type="range" value="1" step="0.001" min="0.01" max="10"
                                        oninput="applyValueChange(this)" id="fClutchChangeRateScaleUpShiftSlider"
                                        name="fClutchChangeRateScaleUpShift">
                                    <span>10</span>
                                </div>
                                <input class="form-control text-center my-2" type="number"
                                    oninput="applyValueChange(this)" step="0.001"
                                    id="fClutchChangeRateScaleUpShiftInput" name="fClutchChangeRateScaleUpShift">
                                <p class=" mx-auto text-center">The vehicle will take <span class="text-danger"
                                        id="fClutchChangeRateScaleUpShiftExpl"></span>s to shift.</p>

                                <hr>
                                <p class="text-muted text-center">fClutchChangeRateScaleDownShift</p>
                                <div class="d-flex align-content-center">
                                    <span>0</span>
                                    <input class="w-100 mx-2 custom-range" type="range" value="1" step="0.001" min="0.01" max="10"
                                        oninput="applyValueChange(this)" id="fClutchChangeRateScaleDownShiftSlider"
                                        name="fClutchChangeRateScaleDownShift">
                                    <span>3</span>
                                </div>
                                <input class="form-control text-center my-2" type="number"
                                    oninput="applyValueChange(this)" step="0.001"
                                    id="fClutchChangeRateScaleDownShiftInput" name="fClutchChangeRateScaleDownShift">
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="bg-light border border-rounded p-4">
                                <h3 class="text-center">Power Bias</h3>
                                <p class="text-muted text-center">fDriveBiasFront</p>

                                <p>Power distribution between the axles.</p>
                                <div class="d-flex align-content-center">
                                    <span>0</span>
                                    <input class="w-100 mx-2 custom-range" type="range" value="0" step="0.05" min="0" max="1"
                                        oninput="applyValueChange(this)" id="fDriveBiasFrontSlider"
                                        name="fDriveBiasFront">
                                    <span>1</span>
                                </div>
                                <input class="form-control text-center my-2" step="0.01" type="number"
                                    oninput="applyValueChange(this)" id="fDriveBiasFrontInput" name="fDriveBiasFront">
                                <p>This is what defines wether a vehicle is RWD, AWD or FWD.</p>
                            </div>
                        </div>

                    </div>
                </div>
            </div>
            <div class="pb-5 tab-pane fade" id="brakes" role="tabpanel" aria-labelledby="brakes-tab">
                <div class="border mt-3">
                    <h3 class="text-center py-1">Brakes</h3>
                    <p class="px-5 text-center">Brakes are one of the main defining factors of the performance of your vehicle. <br>This value should complement both the vehicle's power and traction, so as to keep a coherent balance.
                    <br>Unless you have reasons for it not to.</p>

                    <hr>
                    <div class="row pb-4 px-3">
                        <div class="col-md-4">
                            <div class="bg-light border border-rounded p-4">
                                <h3 class="text-center">Strength</h3>
                                <p class="text-muted text-center">fBrakeForce</p>
                                <div class="d-flex align-content-center">
                                    <span>0</span>
                                    <input class="w-100 mx-2 custom-range" type="range" value="1" step="0.001" min="0.1" max="1"
                                        oninput="applyValueChange(this)" id="fBrakeForceSlider" name="fBrakeForce">
                                    <span>1</span>
                                </div>
                                <input class="form-control text-center my-2" type="number" value="6" step="0.01"
                                    oninput="applyValueChange(this) " id="fBrakeForceInput" name="fBrakeForce">
                                <p>It defines how much force is applied to the wheels to make them stop.</p>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="bg-light border border-rounded p-4">
                                <h3 class="text-center">Brake Bias</h3>
                                <p class="text-muted text-center">fBrakeBiasFront</p>
                                <div class="d-flex align-content-center">
                                    <span>0</span>
                                    <input class="w-100 mx-2 custom-range" type="range" value="0" step="0.05" min="0" max="1"
                                        oninput="applyValueChange(this)" id="fBrakeBiasFrontSlider"
                                        name="fBrakeBiasFront">
                                    <span>1</span>
                                </div>
                                <input class="form-control text-center my-2" step="0.01" type="number"
                                    oninput="applyValueChange(this)" id="fBrakeBiasFrontInput" name="fBrakeBiasFront">
                                <p>Distribution of the brake strength between the axles.</p>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="bg-light border border-rounded p-4">
                                <h3 class="text-center">Handbrake Strength</h3>
                                <p class="text-muted text-center">fHandBrakeForce</p>

                                <div class="d-flex align-content-center">
                                    <span>0</span>
                                    <input class="w-100 mx-2 custom-range" type="range" value="0" step="0.05" min="0" max="1"
                                        oninput="applyValueChange(this)" id="fHandBrakeForceSlider"
                                        name="fHandBrakeForce">
                                    <span>1</span>
                                </div>
                                <input class="form-control text-center my-2" step="0.01" type="number"
                                    oninput="applyValueChange(this)" id="fHandBrakeForceInput" name="fHandBrakeForce">
                                <p>As with Brake Strength, it defines how much force is applied to the wheels to make
                                    them stop, when using the handbrake.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="pb-5 tab-pane fade" id="traction" role="tabpanel" aria-labelledby="traction-tab">
                <div class="border mt-3">
                    <h3 class="text-center py-1">Traction</h3>                    
                    <p class="px-5 text-center">Traction is the main limiter of power and braking ability, and has to be able to handle both; otherwise your vehicle may suffer wheelspin/wheel lock.
                        <br>However, these can also be treated as features and not defects, being part of the vehicle's personality.</p>
                    <hr>
                    <div class="row pb-4 px-3">
                        <div class="col-md-4">
                            <div class="bg-light border border-rounded p-4">
                                <h3 class="text-center">Tire Grip</h3>
                                <p class="text-muted text-center">fTractionCurveMax</p>
                                <div class="d-flex align-content-center">
                                    <span>0</span>
                                    <input class="w-100 mx-2 custom-range" type="range" value="1" step="0.001" min="0" max="3"
                                        oninput="applyValueChange(this)" id="fTractionCurveMaxSlider"
                                        name="fTractionCurveMax">
                                    <span>3</span>
                                </div>
                                <input class="form-control text-center my-2" type="number" value="6" step="1"
                                    oninput="applyValueChange(this) " id="fTractionCurveMaxInput"
                                    name="fTractionCurveMax">
                                <hr>
                                <p class="text-muted text-center">fTractionCurveMin</p>
                                <div class="d-flex align-content-center">
                                    <span>0</span>
                                    <input class="w-100 mx-2 custom-range" type="range" value="1" step="0.001" min="0" max="3"
                                        oninput="applyValueChange(this)" id="fTractionCurveMinSlider"
                                        name="fTractionCurveMin">
                                    <span>3</span>
                                </div>
                                <input class="form-control text-center my-2" type="number" value="6" step="1"
                                    oninput="applyValueChange(this) " id="fTractionCurveMinInput"
                                    name="fTractionCurveMin">
                                <p>Maximum and minimum G's the vehicle's wheels are able to pull.</p>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="bg-light border border-rounded p-4">
                                <h3 class="text-center">Traction Curve (Lateral)</h3>
                                <p class="text-muted text-center">fTractionCurveLateral</p>
                                <div class="d-flex align-content-center">
                                    <span>10</span>
                                    <input class="w-100 mx-2 custom-range" type="range" value="0" step="0.05" min="10" max="30"
                                        oninput="applyValueChange(this)" id="fTractionCurveLateralSlider"
                                        name="fTractionCurveLateral">
                                    <span>30</span>
                                </div>
                                <input class="form-control text-center my-2" step="0.01" type="number"
                                    oninput="applyValueChange(this)" id="fTractionCurveLateralInput"
                                    name="fTractionCurveLateral">
                                <p>Relative direction/aim angle at which the car has the best grip when turning.</p>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="bg-light border border-rounded p-4">
                                <h3 class="text-center">Tire Grip Bias</h3>
                                <p class="text-muted text-center">fTractionBiasFront</p>
                                <div class="d-flex align-content-center">
                                    <span>0</span>
                                    <input class="w-100 mx-2 custom-range " type="range" value="0" step="0.05" min="0" max="1"
                                        oninput="applyValueChange(this)" id="fTractionBiasFrontSlider"
                                        name="fTractionBiasFront">
                                    <span>1</span>
                                </div>
                                <input class="form-control text-center my-2" step="0.01" type="number"
                                    oninput="applyValueChange(this)" id="fTractionBiasFrontInput"
                                    name="fTractionBiasFront">
                                <p>Grip distribution between the axles.</p>
                            </div>
                        </div>
                    </div>
                    <div class="row pb-4 px-3">
                        <div class="col-md-4">
                            <div class="bg-light border border-rounded p-4">
                                <h3 class="text-center">Offroad Traction Loss</h3>
                                <p class="text-muted text-center">fTractionLossMult</p>
                                <div class="d-flex align-content-center">
                                    <span>0</span>
                                    <input class="w-100 mx-2 custom-range" type="range" value="1" step="0.001" min="0" max="1.5"
                                        oninput="applyValueChange(this)" id="fTractionLossMultSlider"
                                        name="fTractionLossMult">
                                    <span>1.5</span>
                                </div>
                                <input class="form-control text-center my-2" type="number" value="6" step="1"
                                    oninput="applyValueChange(this) " id="fTractionLossMultInput"
                                    name="fTractionLossMult">
                                <p>How exaggerated the traction loss is for this vehicle.</p>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="bg-light border border-rounded p-4">
                                <h3 class="text-center">Low Speed Burnout Mult</h3>
                                <p class="text-muted text-center">fLowSpeedTractionLossMult</p>
                                <div class="d-flex align-content-center">
                                    <span>0</span>
                                    <input class="w-100 mx-2 custom-range " type="range" value="0" step="0.05" min="0" max="2"
                                        oninput="applyValueChange(this)" id="fLowSpeedTractionLossMultSlider"
                                        name="fLowSpeedTractionLossMult">
                                    <span>2</span>
                                </div>
                                <input class="form-control text-center my-2" step="0.01" type="number"
                                    oninput="applyValueChange(this)" id="fLowSpeedTractionLossMultInput"
                                    name="fLowSpeedTractionLossMult">
                                <p>How exaggerated the fake burnout griploss is for this vehicle.</p>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="bg-light border border-rounded p-4">
                                <h3 class="text-center">Max Steer Angle</h3>
                                <p class="text-muted text-center">fSteeringLock</p>
                                <div class="d-flex align-content-center">
                                    <span>0</span>
                                    <input class="w-100 mx-2 custom-range" type="range" value="0" step="0.05" min="0" max="50"
                                        oninput="applyValueChange(this)" id="fSteeringLockSlider" name="fSteeringLock">
                                    <span>50</span>
                                </div>
                                <input class="form-control text-center my-2" step="0.01" type="number"
                                    oninput="applyValueChange(this)" id="fSteeringLockInput" name="fSteeringLock">
                                <p>Maximum steering angle for the vehicle.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="pb-5 tab-pane fade" id="suspension" role="tabpanel" aria-labelledby="suspension-tab">
                <div class="border mt-3">
                    <h3 class="text-center py-1">Suspension</h3>
                    <p class="px-5 text-center">Stiffer, softer, loose, tight.<br> This section governs how your car floats above its wheels.</p>
                    <hr>
                    <div class="row pb-4 px-3">
                        <div class="col-md-4">
                            <div class="bg-light border border-rounded p-4">
                                <h3 class="text-center">Spring Strength</h3>
                                <p class="text-muted text-center">fSuspensionForce</p>
                                <div class="d-flex align-content-center">
                                    <span>0</span>
                                    <input class="w-100 mx-2 custom-range" type="range" value="1" step="0.001" min="0" max="5"
                                        oninput="applyValueChange(this)" id="fSuspensionForceSlider"
                                        name="fSuspensionForce">
                                    <span>5</span>
                                </div>
                                <input class="form-control text-center my-2" type="number" value="6" step="1"
                                    oninput="applyValueChange(this) " id="fSuspensionForceInput"
                                    name="fSuspensionForce">
                                <p>Spring strength.</p>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="bg-light border border-rounded p-4">
                                <h3 class="text-center">Spring Dampen Strength</h3>
                                <p class="text-muted text-center">fSuspensionCompDamp</p>
                                <div class="d-flex align-content-center">
                                    <span>0</span>
                                    <input class="w-100 mx-2 custom-range" type="range" value="1" step="0.001" min="0" max="3"
                                        oninput="applyValueChange(this)" id="fSuspensionCompDampSlider"
                                        name="fSuspensionCompDamp">
                                    <span>3</span>
                                </div>
                                <input class="form-control text-center my-2" type="number" value="6" step="1"
                                    oninput="applyValueChange(this) " id="fSuspensionCompDampInput"
                                    name="fSuspensionCompDamp">
                                <hr>
                                <p class="text-muted text-center">fSuspensionReboundDamp</p>
                                <div class="d-flex align-content-center">
                                    <span>0</span>
                                    <input class="w-100 mx-2 custom-range" type="range" value="1" step="0.001" min="0" max="3"
                                        oninput="applyValueChange(this)" id="fSuspensionReboundDampSlider"
                                        name="fSuspensionReboundDamp">
                                    <span>3</span>
                                </div>
                                <input class="form-control text-center my-2" type="number" value="6" step="1"
                                    oninput="applyValueChange(this) " id="fSuspensionReboundDampInput"
                                    name="fSuspensionReboundDamp">
                                <p>How strongly the spring strength is dampened when compressing or decompressing.</p>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="bg-light border border-rounded p-4">
                                <h3 class="text-center">Compression/Decompression Limits</h3>
                                <p class="text-muted text-center">fSuspensionUpperLimit</p>
                                <div class="d-flex align-content-center">
                                    <span>0</span>
                                    <input class="w-100 mx-2 custom-range" type="range" value="1" step="0.001" min="0" max="1"
                                        oninput="applyValueChange(this)" id="fSuspensionUpperLimitSlider"
                                        name="fSuspensionUpperLimit">
                                    <span>1</span>
                                </div>
                                <input class="form-control text-center my-2" type="number" value="6" step="1"
                                    oninput="applyValueChange(this) " id="fSuspensionUpperLimitInput"
                                    name="fSuspensionUpperLimit">
                                <hr>
                                <p class="text-muted text-center">fSuspensionLowerLimit</p>
                                <div class="d-flex align-content-center">
                                    <span>-1</span>
                                    <input class="w-100 mx-2 custom-range" type="range" value="1" step="0.001" min="-1" max="0"
                                        oninput="applyValueChange(this)" id="fSuspensionLowerLimitSlider"
                                        name="fSuspensionLowerLimit">
                                    <span>0</span>
                                </div>
                                <input class="form-control text-center my-2" type="number" value="6" step="1"
                                    oninput="applyValueChange(this) " id="fSuspensionLowerLimitInput"
                                    name="fSuspensionLowerLimit">
                                <p>Compression upper and lower limits, in meters. Yeah, use centimeters.</p>
                            </div>
                        </div>
                    </div>
                    <div class="row pb-4 px-3">
                        <div class="col-md-6">
                            <div class="bg-light border border-rounded p-4">
                                <h3 class="text-center">Suspension Raise</h3>
                                <p class="text-muted text-center">fSuspensionRaise</p>
                                <div class="d-flex align-content-center">
                                    <span>0</span>
                                    <input class="w-100 mx-2 custom-range" type="range" value="1" step="0.001" min="-1" max="1"
                                        oninput="applyValueChange(this)" id="fSuspensionRaiseSlider"
                                        name="fSuspensionRaise">
                                    <span>1</span>
                                </div>
                                <input class="form-control text-center my-2" type="number" value="6" step="1"
                                    oninput="applyValueChange(this) " id="fSuspensionRaiseInput"
                                    name="fSuspensionRaise">
                                <p>In centimeters, this raises or lowers the natural stance of the vehicle.</p>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="bg-light border border-rounded p-4">
                                <h3 class="text-center">Strength Bias</h3>
                                <p class="text-muted text-center">fSuspensionBiasFront</p>
                                <div class="d-flex align-content-center">
                                    <span>0</span>
                                    <input class="w-100 mx-2 custom-range" type="range" value="0" step="0.05" min="0" max="1"
                                        oninput="applyValueChange(this)" id="fSuspensionBiasFrontSlider"
                                        name="fSuspensionBiasFront">
                                    <span>1</span>
                                </div>
                                <input class="form-control text-center my-2" step="0.01" type="number"
                                    oninput="applyValueChange(this)" id="fSuspensionBiasFrontInput"
                                    name="fSuspensionBiasFront">
                                <p>Spring strength distribution between the axles of the vehicle.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="pb-5 tab-pane fade" id="antiroll" role="tabpanel" aria-labelledby="antiroll-tab">
                <div class="border mt-3">
                    <h3 class="text-center py-1">Anti-roll Bars</h3>
                    <p class="px-5 text-center">The main goal of the Anti-roll Bars is to prevent the car from leaning too much when taking a corner.<br>
                    Do keep in mind that the wheels the cars leans into, receive more grip from the pressure, while the wheels on the other side lose traction.</p>
                    <hr>
                    <div class="row pb-4 px-3">
                        <div class="col-md-6">
                            <div class="bg-light border border-rounded p-4">
                                <h3 class="text-center">Antiroll Strength</h3>
                                <p class="text-muted text-center">fAntiRollBarForce</p>
                                <div class="d-flex align-content-center">
                                    <span>0</span>
                                    <input class="w-100 mx-2 custom-range" type="range" value="1" step="0.001" min="0" max="2"
                                        oninput="applyValueChange(this)" id="fAntiRollBarForceSlider"
                                        name="fAntiRollBarForce">
                                    <span>2</span>
                                </div>
                                <input class="form-control text-center my-2" type="number" value="6" step="1"
                                    oninput="applyValueChange(this) " id="fAntiRollBarForceInput"
                                    name="fAntiRollBarForce">
                                <p>How strongly the antiroll bars try to keep the vehicle from leaning.</p>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="bg-light border border-rounded p-4">
                                <h3 class="text-center">Strength Bias</h3>
                                <p class="text-muted text-center">fAntiRollBarBiasFront</p>
                                <div class="d-flex align-content-center">
                                    <span>0</span>
                                    <input class="w-100 mx-2 custom-range" type="range" value="0" step="0.05" min="0" max="1"
                                        oninput="applyValueChange(this)" id="fAntiRollBarBiasFrontSlider"
                                        name="fAntiRollBarBiasFront">
                                    <span>1</span>
                                </div>
                                <input class="form-control text-center my-2" step="0.01" type="number"
                                    oninput="applyValueChange(this)" id="fAntiRollBarBiasFrontInput"
                                    name="fAntiRollBarBiasFront">
                                <p>Distribution of the antiroll bar strength between the car axles.</p>
                            </div>
                        </div>
                    </div>
                    <hr>
                    <div class="row pb-4 px-3">
                        <div class="col-md-6">
                            <div class="bg-light border border-rounded p-4">
                                <h3 class="text-center">Rollcentre - Front</h3>
                                <p class="text-muted text-center">fRollCentreHeightFront</p>
                                <div class="d-flex align-content-center">
                                    <span>0</span>
                                    <input class="w-100 mx-2 custom-range" type="range" value="1" step="0.001" min="0" max="1"
                                        oninput="applyValueChange(this)" id="fRollCentreHeightFrontSlider"
                                        name="fRollCentreHeightFront">
                                    <span>1</span>
                                </div>
                                <input class="form-control text-center my-2" type="number" value="6" step="1"
                                    oninput="applyValueChange(this) " id="fRollCentreHeightFrontInput"
                                    name="fRollCentreHeightFront">
                                <p>Relative to the model bottom, defines where the pivot point is. This is used for
                                    leaning.</p>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="bg-light border border-rounded p-4">
                                <h3 class="text-center">Rollcentre - Back</h3>
                                <p class="text-muted text-center">fRollCentreHeightRear</p>
                                <p>Lorem ipsum dolor sit amet consectetur adipisicing elit..</p>
                                <div class="d-flex align-content-center">
                                    <span>0</span>
                                    <input class="w-100 mx-2 custom-range" type="range" value="0" step="0.05" min="0" max="1"
                                        oninput="applyValueChange(this)" id="fRollCentreHeightRearSlider"
                                        name="fRollCentreHeightRear">
                                    <span>1</span>
                                </div>
                                <input class="form-control text-center my-2" step="0.01" type="number"
                                    oninput="applyValueChange(this)" id="fRollCentreHeightRearInput"
                                    name="fRollCentreHeightRear">
                                <p>Relative to the model bottom, defines where the pivot point is. This is used for
                                    leaning.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="pb-5  tab-pane fade" id="raw" role="tabpanel" aria-labelledby="raw-tab">
                <textarea type="textarea" value="" id="handlingFileDisplay" style="min-height:1000px;"
                    class="mt-5 w-100 bg-light text-success"></textarea>

            </div>

            <div class="bg-light border">
                <h3 class="text-center">Summary</h3>
                <hr>
                <div class="w-25 mx-auto mb-5">
                    <p>You can add a comparison item for in the graphs by uploading another handling file here.</p>
                    <div class="custom-file">

                        <input type="file" class="custom-file-input" id="compparisonHandlingFileLoader">
                        <label class="custom-file-label" for="compparisonHandlingFileLoader">Select a handling.meta file...</label>
                    </div>
                </div>

                <div class="row">
                    <div class="col-md-3">
                        <h3 class="text-center">Torque per gear</h3>
                        <canvas id="powerChart" width="1" height="1" style="max-width: 400px;" class="mx-auto"></canvas>
                    </div>
                    <div class="col-md-3">
                        <h3 class="text-center">Speeds in gear</h3>
                    </div>
                    <div class="col-md-3">
                        <h3 class="text-center">???</h3>
                    </div>
                    <div class="col-md-3">
                        <h3 class="text-center">???</h3>
                    </div>
                </div>

            </div>
            <pre id="handlingArray" class="bg-info border d-none"></pre>
            <footer class="my-5">
                <p class="text-center bg-light border py-3">Stitched up together using from <strong>Bootstrap</strong>, <strong>Charts.js</strong> and <strong>Notify.js</strong>.</p>
            </footer>
        </div>
    </div>
</body>
<script>


    var baseHandlingV = `<?xml version="1.0" encoding="UTF-8"?>
<CHandlingDataMgr>
  <HandlingData>
  	<Item type="CHandlingData">
      <handlingName>HANDLINGIDHERE</handlingName>
      <fMass value="1500.000000" />
      <fInitialDragCoeff value="8.000000" />
	  <fDownforceModifier value="1.000" />
      <fPercentSubmerged value="85.000000" />
      <vecCentreOfMassOffset x="0.000000" y="0.00000" z="0.000000" />
      <vecInertiaMultiplier x="1.400000" y="1.400000" z="1.600000" />
      <fDriveBiasFront value="0.000000" />
      <nInitialDriveGears value="6" />
      <fInitialDriveForce value="0.2000" />
      <fDriveInertia value="1.00000" />
      <fClutchChangeRateScaleUpShift value="2.00000" />
      <fClutchChangeRateScaleDownShift value="2.00000" />
      <fInitialDriveMaxFlatVel value="140.000000" />
      <fBrakeForce value="0.400000" />
      <fBrakeBiasFront value="0.60000" />
      <fHandBrakeForce value="0.60000" />
      <fSteeringLock value="35.000000" />
      <fTractionCurveMax value="2.300" />
      <fTractionCurveMin value="2.000" />
      <fTractionCurveLateral value="22.500000" />
      <fTractionSpringDeltaMax value="0.150000" />
      <fLowSpeedTractionLossMult value="0.500000" />
      <fCamberStiffnesss value="0.000000" />
      <fTractionBiasFront value="0.5000" />
      <fTractionLossMult value="1.000000" />
      <fSuspensionForce value="3.0000" />
      <fSuspensionCompDamp value="1.400000" />
      <fSuspensionReboundDamp value="1.400000" />
      <fSuspensionUpperLimit value="0.0750000" />
      <fSuspensionLowerLimit value="-0.0750000" />
      <fSuspensionRaise value="0.000000" />
      <fSuspensionBiasFront value="0.50000" />
      <fAntiRollBarForce value="0.450000" />
      <fAntiRollBarBiasFront value="0.500000" />
      <fRollCentreHeightFront value="0.30000" />
      <fRollCentreHeightRear value="0.30000" />
      <fCollisionDamageMult value="1.0000" />
      <fWeaponDamageMult value="1.000000" />
      <fDeformationDamageMult value="1.000000" />
      <fEngineDamageMult value="1.500000" />
      <fPetrolTankVolume value="65.000000" />
      <fOilVolume value="5.000000" />
      <fSeatOffsetDistX value="0.000000" />
      <fSeatOffsetDistY value="0.000000" />
      <fSeatOffsetDistZ value="0.000000" />
      <nMonetaryValue value="35000" />
      <strModelFlags>440010</strModelFlags>
      <strHandlingFlags>20000</strHandlingFlags>
      <strDamageFlags>0</strDamageFlags>
      <AIHandling>AVERAGE</AIHandling>
      <SubHandlingData>
  		<Item type="NULL" />
        <Item type="NULL" />
        <Item type="NULL" />
      </SubHandlingData>
    </Item>
  </HandlingData>
</CHandlingDataMgr>`;
    var handlingFile = null;
    var rawInput = document.getElementById("handlingFileDisplay");

    rawInput.value = baseHandlingV;


    var handlingArray = {
        handling: {

        }
    }
    var comparisonHandlingArray = {
        handling: {

        }
    }
    //File save
    function UpdateFileObject() {
        var a = document.getElementById("savefile");
        var text = rawInput.value; //handlingFile.getElementsByTagName("CHandlingDataMgr")[0];
        var file = new Blob([text], { type: "text/xml" });

        a.href = URL.createObjectURL(file);
        a.download = "handling.meta";
    }

    //File load
    var input = document.getElementById("handlingFileLoader");
    input.addEventListener("change", function () {
        if (this.files && this.files[0]) {
            var myFile = this.files[0];
            var reader = new FileReader();
            reader.addEventListener('load', function (e) {
                //Parse the document. Copy all values in the document on to the sliders/inputs in the page
                parser = new DOMParser();
                xmlDoc = parser.parseFromString(e.target.result, "text/xml");
                xmlDoc.getElementsByTagName("Item")[0].childNodes.forEach(element => {
                    if (element.attributes) {
                        var d = element.attributes[0];
                        if (d != null) {
                            var sld = document.getElementById(element.nodeName + "Slider");
                            if (sld != null) sld.value = d.value;
                            var input = document.getElementById(element.nodeName + "Input");
                            if (input != null) {
                                input.value = d.value;
                                UpdateExplanations(input);
                            }
                            handlingArray.handling[element.nodeName] = d.value;
                            updateArrayPre();
                            UpdateCharts();
                            $("#wEmptyFile").toggleClass("d-none", true);
                        }
                    }
                });
                //Copy the file's raw content to the raw input. We will do all our edits there.
                rawInput.value = e.target.result;
            });
            reader.readAsText(myFile);
            $.notify("File loaded.", "success");
        }
    });

    //Comparison file load    
    var input = document.getElementById("compparisonHandlingFileLoader");
    input.addEventListener("change", function () {
        if (this.files && this.files[0]) {
            var myFile = this.files[0];
            var reader = new FileReader();
            reader.addEventListener('load', function (e) {
                //Parse the document. Copy all values in the document on to the sliders/inputs in the page
                parser = new DOMParser();
                xmlDoc = parser.parseFromString(e.target.result, "text/xml");
                xmlDoc.getElementsByTagName("Item")[0].childNodes.forEach(element => {
                    if (element.attributes) {
                        var d = element.attributes[0];
                        if (d != null) {

                            comparisonHandlingArray.handling[element.nodeName] = d.value;

                            UpdateCharts();
                            $("#wEmptyFile").toggleClass("d-none", true);
                        }
                    }
                });

            });
            reader.readAsText(myFile);
            $.notify("File loaded.", "success");
        }
    });



    //Other




    //Replace the values in the rawInput textarea.
    //This textarea holds the data we will provide when saving the file.
    function replaceHandlingAttr(attr, attrName, newValue) {
        var reg = new RegExp('(' + attr + ' ' + attrName + '=")+[a-z.0-9-]*(")', "i");
        if (rawInput.value != null) rawInput.value = rawInput.value.replace(reg, attr + ' ' + attrName + '="' + newValue + '"')
    }

    //Applies the change to the array, and looks for its html counterpart (Slider/Input). 
    //Also applies a the change to them, to keep parity.
    function applyValueChange(e, type) {

        if (type == null) type = "value";
        if (rawInput.value.length < 1000) {
            $("#wEmptyFile").toggleClass("d-none", false);
            return;
        }
        else {
            $("#wEmptyFile").toggleClass("d-none", true);
        }

        replaceHandlingAttr(e.name, type, e.value);
        handlingArray.handling["" + e.name] = e.value;
        if (e.id == e.name + "Input") {

            var input = document.getElementById(e.name + "Slider");
            input.value = e.value;
        }
        else {
            var input = document.getElementById(e.name + "Input");
            input.value = e.value;
        }
        updateArrayPre();
        UpdateCharts();
        UpdateExplanations(e);
    }
    function UpdateExplanations(e) {
        //Shifting
        var expl = document.getElementById(e.name + "Expl");
        if (expl != null) {
            if (e.name == "fClutchChangeRateScaleUpShift") {
                expl.innerHTML = Math.round((1 / e.value) * 1000) / 1000;
            }
        }


    }

    function updateArrayPre() {
        document.getElementById("handlingArray").innerHTML = JSON.stringify(handlingArray, undefined, 2);
    }
    function UpdateCharts() {

        //Torque Chart

        var power = handlingArray.handling.fInitialDriveForce;
        var gears = handlingArray.handling.nInitialDriveGears;
        for (var i = 1; i < 10; i++) chartPower.data.datasets[0].data[i] = 0;
        for (var i = 0; i < gears; i++) {
            chartPower.data.datasets[0].data[i] = power * gearRatios[i + 1];
        }

        //Drag Chart
        chartAirDrag.data.datasets[0].data[0] = 0;
        chartAirDrag.data.datasets[0].data[1] = handlingArray.handling.fInitialDragCoeff;
        chartAirDrag.data.datasets[0].data[2] = handlingArray.handling.fInitialDragCoeff * 2;


        var power = comparisonHandlingArray.handling.fInitialDriveForce;
        var gears = comparisonHandlingArray.handling.nInitialDriveGears;
        for (var i = 1; i < 10; i++) chartPower.data.datasets[1].data[i] = 0;
        for (var i = 0; i < gears; i++) {
            chartPower.data.datasets[1].data[i] = power * gearRatios[i + 1];
        }

        //Drag Chart
        chartAirDrag.data.datasets[1].data[0] = 0;
        chartAirDrag.data.datasets[1].data[1] = comparisonHandlingArray.handling.fInitialDragCoeff;
        chartAirDrag.data.datasets[1].data[2] = comparisonHandlingArray.handling.fInitialDragCoeff * 2;


        chartDownforce.data.datasets[0].data[1] = handlingArray.handling.fDownforceModifier;
        chartDownforce.data.datasets[1].data[1] = comparisonHandlingArray.handling.fDownforceModifier;

        chartPower.update();
        chartAirDrag.update();
        chartDownforce.update();
    }

    var ctxDownforce = document.getElementById('downforceChart').getContext('2d');
    var chartDownforce = new Chart(ctxDownforce, {
        type: 'line',

        data: {
            labels: null,

            datasets: [{
                label: 'Your vehicle',
                data: [0, 1.5, 3],
                backgroundColor: [
                    'rgba(255, 99, 132, 0.2)',

                ],
                borderColor: [
                    'rgba(255, 99, 132, 1)',

                ],
                borderWidth: 1,
                lineTension: 0,
            },
            {
                label: 'Average car',
                data: [0, 1, 2],
                backgroundColor: [

                    'rgba(0, 0, 0, 0.05)',
                ],
                borderColor: [

                    'rgba(0, 0, 0, 0.5)',
                ],
                borderWidth: 1,
                lineTension: 0,
            }],

        },
        options: {
            scales: {
                yAxes: [{
                    ticks: {
                        beginAtZero: true,
                        max: 5,
                        min: 0
                    },
                },],
            },
        },
    });

    var ctxAirDrag = document.getElementById('airdragChart').getContext('2d');
    var chartAirDrag = new Chart(ctxAirDrag, {
        type: 'line',

        data: {
            labels: null,

            datasets: [{
                label: 'Your vehicle',
                data: [0, 1.5, 3],
                backgroundColor: [
                    'rgba(255, 99, 132, 0.2)',

                ],
                borderColor: [
                    'rgba(255, 99, 132, 1)',

                ],
                borderWidth: 1,
                lineTension: 0,
            },
            {
                label: 'Comparison',
                data: [0, 1, 2],
                backgroundColor: [

                    'rgba(0, 0, 0, 0.05)',
                ],
                borderColor: [

                    'rgba(0, 0, 0, 0.5)',
                ],
                borderWidth: 1,
                lineTension: 0,
            }],

        },
        options: {
            scales: {
                yAxes: [{
                    ticks: {
                        beginAtZero: true,
                        max: 20,
                        min: 0
                    },
                },],
            },
        },
    });

    var gearRatios =
    {
        "-1": -3.33,
        "1": 3.33,
        "2": 1.848,
        "3": 1.253,
        "4": 0.934,
        "5": 0.766,
        "6": 0.691,
        "7": 0.686,
        "8": 0.749,
        "9": 0.899,
        "10": 0.9,
    }

    var ctxPower = document.getElementById('powerChart').getContext('2d');
    var chartPower = new Chart(ctxPower, {
        type: 'line',

        data: {
            labels: ["1st", "2nd", "3rd", "4th", "5th", "6th", "7th", "8th", "9th", "10th"],

            datasets: [{
                steppedLine: true,
                label: 'This car',
                data: [0.2 * gearRatios[1], 0.2 * gearRatios[2], 0.2 * gearRatios[3], 0.2 * gearRatios[4], 0.2 * gearRatios[5], 0.2 * gearRatios[6],],
                backgroundColor: [
                    'rgba(255, 99, 132, 0.2)',

                ],
                borderColor: [
                    'rgba(255, 99, 132, 1)',

                ],
                borderWidth: 1,
                lineTension: 0,
            },
            {
                steppedLine: true,
                label: 'Comparison',
                data: [0.2 * gearRatios[1], 0.2 * gearRatios[2], 0.2 * gearRatios[3], 0.2 * gearRatios[4], 0.2 * gearRatios[5], 0.2 * gearRatios[6],],
                backgroundColor: [
                    'rgba(0, 0, 0, 0.2)',

                ],
                borderColor: [
                    'rgba(0, 0, 0, 1)',

                ],
                borderWidth: 1,
                lineTension: 0,
            }],

        },
        options: {
            scales: {
                yAxes: [{
                    ticks: {
                        beginAtZero: true,
                        min: 0
                    },
                },],
            },
        },
    });


    /*
        slider.oninput = function() {
            var shiftTime = this.value / 100;
            displayValue.innerHTML = shiftTime;

            realValue.innerHTML = Math.round((1 / shiftTime) * 10000) / 10000;
        }
        function map(x, in_min, in_max, out_min, out_max) {
            return (x - in_min) * (out_max - out_min) / (in_max - in_min) + out_min;
        }
    	*/

    parser = new DOMParser();
    xmlDoc = parser.parseFromString(rawInput.value, "text/xml");
    xmlDoc.getElementsByTagName("Item")[0].childNodes.forEach(element => {
        if (element.attributes) {
            var d = element.attributes[0];
            if (d != null) {
                var sld = document.getElementById(element.nodeName + "Slider");
                if (sld != null) sld.value = d.value;
                var input = document.getElementById(element.nodeName + "Input");
                if (input != null) {
                    input.value = d.value;
                    UpdateExplanations(input);
                }
                handlingArray.handling[element.nodeName] = d.value;
                comparisonHandlingArray.handling[element.nodeName] = d.value;

                UpdateCharts();
                $("#wEmptyFile").toggleClass("d-none", true);
            }
        }
    });




    UpdateCharts();

    $(".custom-file-input").on("change", function () {
        var fileName = $(this).val().split("\\").pop();
        $(this).siblings(".custom-file-label").addClass("selected").html(fileName);
    });

</script>

</html>