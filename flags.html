<!doctype html>
<html class="no-js"lang="ES-es">
	<head>
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible"content="IE=edge,chrome=1">
		<title>Handling Flags</title>
		<meta name="description"content="">
		<meta name="viewport"content="width=device-width, initial-scale=1, shrink-to-fit=no">
		<link rel="stylesheet"href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
		<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.0/jquery.min.js"></script>
		<style type="text/css">
			
		.bg-gray{
			background-color: gray;
		}

		</style>
		<body>
			<main class="container-fluid mt-3">
				<h1 class="text-center mt-3">Handling flags (WIP)</h1>
				<!--<button class="btn btn-primary" >STUFF</button>-->
				<div class="text-center mt-5 mx-auto w-50  border border-info p-3">
					<h3 class="text-center mt-3">Handling Flags Generator</h3>
					<div id="table" class=" border border-gray bg-light container-fluid">
						<div class="row">
							<div class="col-md-3 py-1  align-middle">IS_VAN</div>
							<div class="col-md-3 py-1 align-middle">IS_BUS</div>
							<div class="col-md-3 py-1 align-middle">IS_LOW</div>
							<div class="col-md-3 py-1 align-middle">IS_BIG</div>
						</div>
						<div class="row">
							<div class="col-md-3 py-1 align-middle">ABS_STD</div>
							<div class="col-md-3 py-1 align-middle">ABS_OPTION</div>
							<div class="col-md-3 py-1 align-middle">ABS_ALT_STD</div>
							<div class="col-md-3 py-1 align-middle">ABS_ALT_OPTION</div>
						</div>
						<div class="row">
							<div class="col-md-3 py-1 align-middle">NO_EXHAUST</div>
							<div class="col-md-3 py-1 align-middle">DOUBLE_EXHAUST</div>
							<div class="col-md-3 py-1 align-middle">NO1FPS_LOOK_BEHIND</div>
							<div class="col-md-3 py-1 align-middle">CAN_ENTER_IF_NO_DOOR</div>
						</div>
						<div class="row">
							<div class="col-md-3  py-1 align-middle">NO_DOORS</div>
							<div class="col-md-3 py-1 align-middle">TANDEM_SEATS</div>
							<div class="col-md-3 py-1 align-middle">SIT_IN_BOAT</div>
							<div class="col-md-3 py-1 align-middle">HAS_TRACKS</div>
						</div>
						<div class="row">
							<div class="col-md-3  py-1 align-middle ">AXLE_F_TORSION</div>
							<div class="col-md-3 py-1 align-middle">AXLE_F_SOLID</div>
							<div class="col-md-3 py-1 align-middle">AXLE_F_MCPHERSON</div>
							<div class="col-md-3 py-1 align-middle">ATTACH_PED_TO_BODYSHELL</div>
						</div>
						<div class="row">
							<div class="col-md-3  py-1 align-middle ">AXLE_R_TORSION</div>
							<div class="col-md-3 py-1 align-middle">AXLE_R_SOLID</div>
							<div class="col-md-3 py-1 align-middle">AXLE_R_MCPHERSON</div>
							<div class="col-md-3 py-1 align-middle">DONT_FORCE_GRND_CLEARANCE</div>
						</div>
						<div class="row">
							<div class="col-md-3  py-1 align-middle ">DONT_RENDER_STEER</div>
							<div class="col-md-3 py-1 align-middle">NO_WHEEL_BURST</div>
							<div class="col-md-3 py-1 align-middle">INDESTRUCTIBLE</div>
							<div class="col-md-3 py-1 align-middle">DOUBLE_FRONT_WHEELS</div>
						</div>
						<div class="row">
							<div class="col-md-3  py-1 align-middle ">RC</div>
							<div class="col-md-3 py-1 align-middle">DOUBLE_RWHEELS</div>
							<div class="col-md-3 py-1 align-middle">MF_NO_WHEEL_BREAK</div>
							<div class="col-md-3 py-1 align-middle">IS_HATCHBACK</div>
						</div>
					</div>
					<div class="border border-info bg-light mt-2">
					<h3 class="">Result</h3>
					<div class=" mt-2 mx-auto text-center text-truncate w-50 border border-dark bg-light ">&lt;strModelFlags&gt;<span class="text-muted"><strong id="flags">00000000</strong></span>&lt;&frasl;strModelFlags&gt;</div>
				</div>
				</div>
			</main>
		</body>
		<script type="text/javascript">
		////////
		window.onload=autoborders;

		function autoborders(){
			var autoborder= document.querySelectorAll(".col-md-3");
			for (var i = 0; i <= autoborder.length - 1; i++) {
			autoborder[i].onclick=toggle;
				$(autoborder[i]).toggleClass("border", true);
				$(autoborder[i]).toggleClass("text-truncate", true);
				//$(autoborder[i]).toggleClass("text-muted", true);
				$(autoborder[i]).toggleClass("border-gray", true);
		//		$(autoborder[i]).toggleClass("bg-light", true);
				}
		}
		////////
			
		//document.getElementsByTagName('main')[0].onclick=toggle;
		function toggle(e){
		$(e.target).toggleClass("bg-success");
		//$(e.target).toggleClass("bg-light");
		//$(e.target).toggleClass("text-muted");

		var flagsfinal="";
		var d= e.target.parentNode.querySelectorAll(".col-md-3");
		var arrayRows=document.querySelectorAll(".row");
		arrayRows= $(arrayRows).toArray().reverse();
			var n=1;
			var m=1;
			var res=0;
		for (var a = 0; a <= arrayRows.length - 1; a++) {
			//$(arrayRows[a]).toggleClass("bg-light");
			var columnas= arrayRows[a].querySelectorAll(".col-md-3");
			n=1;
			m=1;
			res=0;
			for (var i = 0; i <= columnas.length - 1; i++) {
			
				if($(columnas[i]).hasClass("bg-success")){
						res += n*(m);
					
				}
		m*=2;
				
			}
			if(res==0)flagsfinal += "<span class='text-muted'>"+res.toString(16).toUpperCase()+"<span>";
						else flagsfinal += "<span class='text-success'>"+res.toString(16).toUpperCase()+"<span>";
								res=0;
						}
						
						document.getElementById('flags').innerHTML=flagsfinal.toString();
						}
						/*
						for (var i = 0; i <= d.length - 1; i++) {
							
							if($(d[i]).hasClass("bg-success")){
								res+=n*(m);
							}
							m*=2;
						}*/
								
				</script>
